#!/usr/bin/env bash

set -euo pipefail

# Determine display to stop (default :1)
DISPLAY_NUM=${1:-1}

vncserver -kill ":${DISPLAY_NUM}" || true

# Clean up known files for this display
USER_HOME=${HOME:-/root}
rm -f "${USER_HOME}/.vnc/localhost:${DISPLAY_NUM}.pid" 2>/dev/null || true
rm -f "/tmp/.X${DISPLAY_NUM}-lock" 2>/dev/null || true
rm -f "/tmp/.X11-unix/X${DISPLAY_NUM}" 2>/dev/null || true